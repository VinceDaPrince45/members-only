<div>
    <h3><strong><%= chat.name %> Messages: </strong></h3>
    <ul>
        <% if (messages) { %>
            <% messages.forEach((message) => { %>
                <li>
                    <%= message.text %> at <%= message.timestamp_formatted %>
                    <!-- need to check if current user has permission to view and if not, have sidebar on side to enter password -->
                </li>
            <% }) %>
        <% } else { %>
            <p>No messages</p>
        <% } %>
        <form action="/chat/<%= chat._id %>" method="post">
            <input type="hidden" name="formType" value="messageForm">
            <div>
                <label for="title">Title: </label>
                <input type="text" id="title" name="title" placeholder="Type title here">
            </div>
            <div>
                <label for="message">Text: </label>
                <textarea type="text" id="message" name="message" placeholder="Type message here"></textarea>
            </div>
            <button class="btn btn-primary" type="submit">Send</button>
        </form>
        <% if (messageErrors) { %>
            <ul>
                <% messageErrors.forEach(function(error) { %>
                    <li style="color:red;"><%= error.msg %></li>
                <% }); %>
            </ul>
        <% } %>
    </ul>
</div>